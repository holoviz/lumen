{% extends 'Agent/main.jinja2' %}

{%- block instructions %}
# Plan Next Step

## ðŸŽ¯ EFFICIENCY PRIORITY:
1. Reuse before rebuild - Check materialized data first
2. Batch discoveries - Combine multiple explorations  
3. Progress decisively - Move toward final answer quickly

## Decision Logic:
- Materialized data exists? â†’ Use it
- Simple request? â†’ Final answer immediately
- Complex request? â†’ Batch discoveries â†’ Final query

## Avoid:
- Temporal mismatches (check date overlaps)
- Format assumptions (spaces vs underscores)
- Repeating previous work
{%- endblock %}

{% block examples %}
Examples: Direct query â†’ Final | Complex â†’ Batch discoveries â†’ Final | Reuse existing materialized data
{% endblock %}

{% block context %}
{{ memory["sql_metaset"].compact_context }}

Steps: {{ total_steps }}
{%- if sql_plan_context %}
{{ sql_plan_context }}
{%- endif %}
{% endblock %}

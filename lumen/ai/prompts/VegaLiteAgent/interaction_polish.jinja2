{% extends 'VegaLiteAgent/improvement_step.jinja2' %}

{% block instructions %}
# Visual Polish

Analyze the rendered image and fix visual issues for publication-ready clarity.

**Focus areas**: overlapping labels, cramped layouts, poor readability, missing tooltips, clutter

**Rules**:
- Layers require BOTH `mark` and `encoding` - always include both
- Make minimal, targeted changes (1-3 fixes)
- NEVER use ellipsis (`...`) or placeholders
- Every element should serve a purpose

# Quick Fixes

```yaml
# Overlapping x-axis labels
encoding:
  x: {axis: {labelAngle: -45, labelLimit: 100}}

# Add padding
config:
  padding: {left: 20, bottom: 50}

# Reduce clutter
config:
  axis: {grid: false}

# Add tooltip (MUST include mark)
layer:
  - mark: line
    encoding:
      x: {field: year, type: quantitative}
      y: {field: value, type: quantitative}
      tooltip:
        - {field: year, title: Year, type: quantitative}
        - {field: value, title: Value, format: .2f, type: quantitative}
```

# Common Mistakes
```yaml
# ❌ WRONG - Missing mark
layer:
  - encoding: {tooltip: [...]}

# ❌ WRONG - Ellipsis
config: {axis: {grid: false}, ...}

# ✅ CORRECT - Complete structure
layer:
  - mark: line
    encoding:
      x: {field: year, type: quantitative}
      y: {field: value, type: quantitative}
```
{% endblock %}

{% block examples %}
{% endblock %}

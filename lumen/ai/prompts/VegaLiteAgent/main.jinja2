{% extends 'BaseViewAgent/main.jinja2' %}

{% block instructions %}
Generate the basic plot structure with core elements only.

# CORE REQUIREMENTS
- Use `data: {name: {{ memory['table'] }}}` - never invent data
- Use exact column names from source
- Core mark type (bar, line, point, etc.)
- Essential x/y encodings only
- Basic transforms if needed (fold, calculate, etc.)
- NO titles, colors, tooltips, or styling

# SORTING FOR RANKINGS
For bar charts, sort by quantitative values to show rankings:
- Horizontal: `y: {field: category, type: ordinal, sort: "-x"}`
- Vertical: `x: {field: category, type: ordinal, sort: "-y"}`

# DATA TYPES
- Year ints/floats: type=quantitative if length>10, else ordinal
- Date strings: type=temporal with timeUnit
- Combine date fields: `calculate: datetime(datum.Year, datum.Month-1)`
{% endblock %}

{% block examples %}
Basic horizontal bars:
```yaml
data:
  name: <TABLE_NAME>
mark: bar
encoding:
  x: {field: value_field, type: quantitative}
  y: {field: category_field, type: ordinal, sort: "-x"}
```

Limit large datasets:
```yaml
data:
  name: <TABLE_NAME>
transform:
- window: [{op: "rank", as: "rank"}]
  sort: [{field: "value_field", order: "descending"}]
- filter: "datum.rank <= 15"
mark: bar
encoding:
  x: {field: value_field, type: quantitative}
  y: {field: category_field, type: ordinal, sort: "-x"}
```
{% endblock %}

{% block errors %}
{{ super() }}

{% if errors is defined and errors %}
For extra context, here are the data and columns available:
{{ columns_context }}
{% endif %}
{% endblock %}

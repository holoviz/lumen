{% extends 'LumenBaseAgent/retry_output.jinja2' %}

{% block instructions %}
{{ super() }}

- For overlays: data at top level, encoding in layer
- When updating layer properties: provide the complete layer structure with all encoding properties that should remain, not just the properties being changed
{% endblock %}

{%- block examples -%}
# EXAMPLES
{% if doc_examples is defined and doc_examples %}
{% for example in doc_examples %}
{{ example }}
{% endfor %}
{% endif %}

Updating layer colors in hconcat:
```{{ language }}
# To change bar colors from blue to gray, provide complete layer structure:
hconcat:
- layer:
  - mark: bar
    encoding:
      color:
        value: 'gray'
      tooltip:
      - bin: true
        field: input_tokens
        title: Input Tokens Range
        type: quantitative
      - aggregate: count
        title: Count
        type: quantitative
      x:
        axis:
          title: Input Tokens (binned)
        bin: true
        field: input_tokens
        type: quantitative
      y:
        aggregate: count
        axis:
          title: Count of Records
        type: quantitative
- layer:
  - mark: bar
    encoding:
      color:
        value: 'gray'
      tooltip:
      - bin: true
        field: output_tokens
        title: Output Tokens Range
        type: quantitative
      - aggregate: count
        title: Count
        type: quantitative
      x:
        axis:
          title: Output Tokens (binned)
        bin: true
        field: output_tokens
        type: quantitative
      y:
        aggregate: count
        axis:
          title: Count of Records
        type: quantitative
```
{%- endblock -%}
